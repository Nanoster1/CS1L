@page "/table"
@using CS1L.Shared.Models.Tests
@using CS1L.Shared.Models.DTOs
@inject HttpClient HttpClient;
<MudContainer>
    <MudStack>
        @foreach(var item in AllTests)
        { // TODO пошаманить с размерами 
            <MudContainer Style="display: flex">
                <MudContainer Style="display: flex">
                    <MudText Style="align-self: center;">@item.Name</MudText>
                </MudContainer>
                <MudContainer Style="display: flex">
                    <MudText Style="align-self: center;">@item.Questions.Count</MudText>
                </MudContainer>
    
                <MudIconButton Style="height: 50px" Icon="@Icons.Filled.ArrowForwardIos" OnClick="() => { CreateLobby(item.Id); }"/>
            </MudContainer>
        }
    </MudStack>
</MudContainer>


@code {

    List<Test> AllTests = new List<Test>();
    
    protected override async Task OnInitializedAsync()
    {
        AllTests = new List<Test>()
        {
            new Test()
            {
                Name = "name",
                Questions = new List<Question>()
                {
                    new Question(),
                    new Question()
                }
            }
        };
    // AllTests = (await HttpClient.GetFromJsonAsync<List<Test>>("tests"))!;
    }

    async Task CreateLobby(int TestId)
    { //TODO Добавить id юзера
        
      //  CreateLobbyDTO userandTestId = new CreateLobbyDTO(0, TestId);
      // var responce = await HttpClient.PostAsJsonAsync("create-lobby",userandTestId);
    }
}